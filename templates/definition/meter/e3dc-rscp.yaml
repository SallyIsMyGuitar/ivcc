template: e3dc-rscp
products:
  - brand: E3/DC
capabilities: ["battery-control"]
requirements:
  description:
    de: |
      Benutzername und Passwort sind identisch zum Web-Portal bzw. My E3/DC App. Key bzw. RSCP-Passwort wird im Hauskraftwerk unter Personalisieren/Benutzerprofil angelegt.
      Bei aktiver Batteriesteuerung kann nicht nur eine Entladesperre gesetzt, sondern eine Leistung definiert werden, welche die Batterie im 'Halten' Batteriemodus dennoch liefert, z.B. um wenigstens noch den Hausverbrauch zu bedienen. So wird die Batterie weiterhin moderat entladen und hat damit die Möglichkeit am nächsten Tag mehr PV-Überschuß aufzunehmen.

      **Achtung**: Die aktive Batteriesteuerung sollte nur verwendet werden, wenn keine weiteren Einstellungen im Smart-Power/Betriebsbereich getätigt wurden, denn bestehende Einstellungen werden überschrieben.
    en: |
      Username and password are identical to Web Portal or My E3/DC App access. Key resp. RSCP-Password must be set in the E3/DC System at Personalize/User Profile.
      With active battery control, not only can a discharge lock be set, but a power can be defined that the battery still delivers in 'hold' battery mode, e.g. to at least meet household consumption. This will continue to moderately discharge the battery, potentially allowing it to store more PV surplus the next day.

      **Attention**: Active battery control should only be used if no other settings in Smart-Power/Operating Range have been set, as existing settings will be overwritten.
params:
  - name: usage
    choice: ["grid", "pv", "battery"]
    allinone: true
  - name: host
  - name: port
    default: 5033
  - name: user
  - name: password
  - name: key
  - name: battery
    type: number
    advanced: true
  - name: dischargelimit
    description:
      de: Entladelimit in W (0=Entladesperre)
      en: Discharge limit in W (0=Discharge lock)
    help:
      de: Limitiert die Entladeleistung im 'Halten' Batteriemodus
      en: Limits discharge power in 'Hold' battery mode
    type: number
    advanced: true
render: |
  type: e3dc-rscp
  usage: {{ .usage }}
  uri: {{ .host }}:{{ .port }}
  user: {{ .user }}
  password: {{ .password }}
  key: {{ .key }}
  battery: {{ .battery }}
  dischargelimit: {{ .dischargelimit }}
