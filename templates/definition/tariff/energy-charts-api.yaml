template: energy-charts-api
products:
  - brand: Fraunhofer ISE
params:
  - name: bzn
    type: string
    required: true
    validvalues: ["AT", "BE", "CH", "CZ", "DE-LU", "DE-At-LU", "DK1", "DK2", "FR", "HU", "IT-NORTH", "NL", "NO2", "PL", "SE4", "SI"]
    default: DE-LU
    description:
      de: "Gebotszonen - https://api.energy-charts.info/#/prices/day_ahead_price_price_get"  
      en: "Bidding zones - https://api.energy-charts.info/#/prices/day_ahead_price_price_get" 
  - preset: tariff-base
render: |
  type: custom
  {{ include "tariff-base" . }}
  forecast:
    source: http
    uri: https://api.energy-charts.info/price?bzn={{ .bzn }}
    jq: '[.unix_seconds, .price] | transpose | map({ "start": (.[0] | todate), "end": ((.[0]+3600) | todate), "price": (.[1]/1000)}) | tostring'
