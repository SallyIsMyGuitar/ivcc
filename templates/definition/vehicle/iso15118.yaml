template: iso15118
products:
  - description:
      generic: ISO15118
group: generic
requirements:
  description:
    de: Nur unterstützt wenn das Fahrzeug den Ladestand (Soc) an die verbundene Wallbox übermitteln kann.
    en: Only supported if the vehicle can provided the state of charge (Soc) to the connected wallbox.
params:
  - name: title
  - name: icon
    default: car
    advanced: true
  - name: capacity
  - name: phases
    advanced: true
  - name: mode
    advanced: true
  - name: minCurrent
    advanced: true
  - name: maxCurrent
    advanced: true
  - name: identifiers
    advanced: true
    type: stringlist
  - name: minSoc
    advanced: true
    default: 0
    help:
      de: Ladung mit maximaler Geschwindigkeit bis zu dem angegeben Ladestand unabhängig PV-Erzeugung, wenn der Lademodus nicht auf 'Aus' steht.
      en: Immediate charging with maximum power up to the defined state of charge independently from solar production if the charge mode is not set to 'OFF'.
  - name: targetSoc
    advanced: true
    default: 100
    help:
      de: Bis zu welchem Ladestand (Soc) soll das Fahrzeug geladen werden.
      en: Until which state of charge (Soc) should the vehicle be charged.
render: |
  type: custom
  features: ["offline"]
  {{- if .title }}
  title: {{ .title }}
  {{- end }}
  {{- if ne .icon "" }}
  icon: {{ .icon }}
  {{- end }}
  capacity: {{ .capacity }} # kWh
  {{- if .phases }}
  phases: {{ .phases }}
  {{- end }}
  soc: # fixed - no Soc available
    source: js
    script: 0;
  onIdentify:
  {{- if (ne .mode "") }}
    mode: {{ .mode }}
  {{- end }}
  {{- if .minSoc }}
    minSoc: {{ .minSoc }}
  {{- end }}
  {{- if .targetSoc }}
    targetSoc: {{ .targetSoc }}
  {{- end }}
  {{- if (ne .minCurrent "") }}
    minCurrent: {{ .minCurrent }}
  {{- end }}
  {{- if (ne .maxCurrent "") }}
    maxCurrent: {{ .maxCurrent }}
  {{- end }}
  {{- if ne (len .identifiers) 0 }}
  identifiers:
  {{-   range .identifiers }}
  - {{ . }}
  {{-   end }}
  {{- end }}
